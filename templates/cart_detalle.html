<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="https://www.agualogic.com/wp-content/uploads/2019/07/cropped-icon-32x32.png">
    <title>Cart | Agualogic</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-0evHe/X+R7YkIZDRvuzKMRqM+OrBnVFBL6DOitfPri4tjfHxaWutUpFmBp4vmVor" crossorigin="anonymous">
</head>

<body>
    <section>
        <div class="container">
            <div class="mx-5 row">
                <div class="col-6">
                    <a class="text-decoration-none" href="/" class="text-decoration-none">
                        <img class="img-fluid"
                            src="https://www.agualogic.com/wp-content/uploads/2021/04/logo_reducido.png" alt=""
                            srcset="">
                    </a>
                </div>
                <div class="py-2 col-6 text-end">
                    <a href="https://api.whatsapp.com/send/?phone=573022868697&text&app_absent=0"
                        class="text-decoration-none">
                        <img class="px-1 img-fluid"
                            src="https://www.agualogic.com/wp-content/uploads/2019/07/icono-2.png" alt="" width="40"
                            height="40" srcset="">
                    </a>

                    <a href="https://www.instagram.com/accounts/login/?next=/agualogicfiltro/"
                        class="text-decoration-none">
                        <img class="px-1 img-fluid"
                            src="https://www.agualogic.com/wp-content/uploads/2019/07/icono-1.png" alt="" width="40"
                            height="40" srcset="">
                    </a>
                    <a href="https://www.facebook.com/Agualogicfiltro/">
                        <img class="px-1 img-fluid" src="https://www.agualogic.com/wp-content/uploads/2019/07/icono.png"
                            alt="" width="40" height="40" srcset="">
                    </a>
                </div>
            </div>
        </div>
    </section>
    <section style="background-color: #eee;">
        <div class="container">
            <div class="row">
                <div class="col-6">
                    {% for a in productsfiltros%}
                    <div class="row pt-3">
                        <div class="col-3">
                            <img style="border-radius: 20px;" class="img-fluid" src="{{a['img']}}" alt="" srcset="">

                        </div>
                        <div class="col-6">
                            <h6>{{a['parrafo']}}</h6>
                            <h6 class="precio">{{a['price']}} X</h6>
                            <h6 class="cantidad">{{a['cantidad']}}</h6>
                        </div>
                        <div class="col-3">
                            <a href="/remove/{{a['_id']}}" type="button" class="btn btn-danger">X</a>
                        </div>
                    </div>
                    {% endfor %}
                </div>
                <div class="col-6">
                    <h4>Resumen</h4>
                    <h2 id="subtotal">Subtotal: 0</h2>

                    <small>En el siguiente paso se calculan los costos de envío según su dirección.</small>
                    <div class="d-grid gap-2">
                        <a href="/checkout" style="background-color: #607d8b ;" type="button"
                            class="btn btn-secondary">Continuar</a>

                        <a href="/category/filtro" type="button" class="btn "
                            style="background-color: #ccc; color: #666;">Ver todos nuestros productos
                        </a>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-12">
                    <h5 class="py-4" style="margin-left: 3.8rem;">También te puede interesar</h5>
                </div>
                {% for m in masvendidos %}
                <div class="col-3 pb-3 mx--1">
                    <a class="text-decoration-none" href="/producto/detalle/{{m['_id']}}">
                        <img class="mb-3"
                            style="border-radius: 20px; display: block;  margin: 0 auto; box-shadow: 0 4px 6px rgba(0, 0, 0, 0.2);"
                            src="{{m['img']}}" width="180" height="164" alt="" srcset="">
                        <div class="div" style="padding-left: 4rem;">
                            <h5 style="color: rgb(27, 27, 27);">{{m['price']}}</h5>
                            <small class="text-secondary" style="margin-top: -0.5rem;">{{m['parrafo']}}</small>
                        </div>
                    </a>
                </div>
                {% endfor %}
            </div>
        </div>
    </section>
    <section>
        <div class="container">
            <div class="text-center py-4">
                <a class="px-2 text-decoration-none" style="font-size: 1.1rem; color: #2d79b8;" href="#">Inicio</a>
                <a class="px-2 text-decoration-none" style="font-size: 1.1rem; color: #2d79b8" href="#">Nuestros
                    Filtros</a>
                <a class="px-2 text-decoration-none" style="font-size: 1.1rem; color: #2d79b8" href="#">Q&A</a>
                <a class="px-2 text-decoration-none" style="font-size: 1.1rem; color: #2d79b8" href="#">Conócenos</a>
                <a class="px-2 text-decoration-none" style="font-size: 1.1rem; color: #2d79b8" href="#">Contacto</a>
            </div>
            <div class="row-12">
                <div class="col text-center">
                    <small>(+57) 350 446 6093</small><br>
                    <small>(+57) 300 258 9820</small><br>
                    <small>(+57) 320 444 1550</small>
                </div>
                <div class="col text-center">
                    <small style="font-weight: bold;">© 2022 Agualogic</small>
                </div>
            </div>
        </div>
    </section>
    <script>
        console.log("Prueba de consola");
        // Obtiene todos los elementos con la clase "cantidad" (donde está la cantidad de cada producto) y precio (donde está el precio de cada producto)
        const cantidadElements = document.querySelectorAll('.cantidad');
        const precioElements = document.querySelectorAll('.precio');

        // Función para calcular el subtotal
        function calcularSubtotal() {
            let subtotal = 0;

            for (let i = 0; i < cantidadElements.length; i++) {
                const cantidad = parseInt(cantidadElements[i].textContent); // Convierte la cantidad a un número
                const precioText = precioElements[i].textContent;

                // Elimina caracteres no numéricos (como "$" y comas) y convierte el precio a un número
                const precio = parseFloat(precioText.replace(/[^0-9.]/g, ''));

                subtotal += cantidad * precio;
            }

            // Actualiza el elemento con el id "subtotal" en el HTML
            document.getElementById('subtotal').textContent = `Subtotal: $${subtotal.toFixed(2)}`;
        }


        // Llama a la función para calcular el subtotal cuando la página se carga y cuando se cambia la cantidad
        window.addEventListener('load', calcularSubtotal);
        console.log(cantidadElements);
        console.log(precioElements);

    </script>
</body>

</html>